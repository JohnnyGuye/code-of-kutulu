<div class="statement-body">
 <div style="color: #7cc576;background-color: rgba(124, 197, 118,.1);padding: 20px;margin-right: 15px;margin-left: 15px;margin-bottom: 10px;text-align: left;">
  <div style="text-align: center; margin-bottom: 6px">
   <img src="//cdn.codingame.com/smash-the-code/statement/league_wood_04.png">
   </img>
  </div>
  <p style="text-align: center; font-weight: 700; margin-bottom: 6px;">
   Résumé des nouvelles règles
  </p>
  <span class="statement-league-alert-content">
   Pas de règles supplémentaires, mais de nouvelles cartes !
  </span>
 </div>
 <div class="statement-section statement-goal">
  <h2>
   <span class="icon icon-goal">
   </span>
   <span>
    Le pitch
   </span>
  </h2>
  <!--  Story -->
  <div class="statement-story" style="min-height: 0">
   <h2>
    Ph'nglui mglw'nafh Cthulhu R'lyeh wgah'nagl fhtagn
   </h2>
   <div class="text">
    <blockquote style="font-style: italic; font-family: fantasy">
     That is not dead which can eternal lie. In strange aeons even death may die
    </blockquote>
    <br/>
    Toi et ton équipe d'explorateurs avez découvert la crypte de Kutulu.
    <br/>
    C'est probablement la pire idée que vous ayez eue car ce dernier n'était pas près à être réveillé et veut vous tuer.
					L'ennui, c'est que la tombe est un véritable labyrinthe dont vous n'arrivez plus à vous souvenir de la sortie... s'il en existe toujours une !
    <br/>
    Oh... et il semble que Kutulu n'était pas seul, il envoie les Profonds après vous.
    <br/>
    Ton but est d'être le dernier survivant de ton équipe, mais souviens toi que seul, tu ne feras pas long feu...
   </div>
  </div>
 </div>
 <!-- Rules -->
 <div class="statement-section statement-rules">
  <h2>
   <span class="icon icon-rules">
   </span>
   <span>
    Règles
   </span>
  </h2>
  <div class="statement-rules-content">
   <p>
    <i>
     Toutes les distances sont par défaut des
     <a href="https://fr.wikipedia.org/wiki/Distance_de_Manhattan">
      distances de Manhattan
     </a>
     si non précisé.
    </i>
   </p>
   <p>
    Le jeu se joue sur une carte de
    <var>
     width
    </var>
    cases de large et
    <var>
     height
    </var>
    cases de haut avec 4 joueurs.
						La carte est prise parmi un ensemble défini de cartes.
    <br/>
    Le point
    <const>
     {0,0}
    </const>
    est le coin supérieur gauche.
   </p>
   <b>
    Unités
   </b>
   <p>
    Chaque joueur est un explorateur perdu sur la carte. Les stats des explorateurs sont indiquées à côté de leur avatar.
            Chaque explorateur commence avec
    <const>
     250
    </const>
    de santé mentale. Tu dois être le dernier explorateur à atteindre
    <const>
     0
    </const>
    de santé.
    <br/>
    Passivement, les joueurs perdent
    <const>
     <span>
      3-6
     </span>
    </const>
    de santé chaque tour à cause de l'environnement hostile dans lequel ils sont plongés.
    <br/>
    <span>
     Quand un autre explorateur est dans un rayon de
     <const>
      2
     </const>
     cases autour de toi, même s'il y a un mur,
     <strong>
      vous vous rassurez mutuellement et perdez
      <span>
       uniquement entre
       <const>
        1-3
       </const>
       de santé
      </span>
     </strong>
     .
    </span>
   </p>
   <p>
    Des portails d'invocation sont positionnés sur certaines cases de la carte. Sur ces cases peuvent apparaître des
    <const>
     wanderers
    </const>
    , un type de
    <b>
     minion
    </b>
    (détaillé plus bas).
    <br/>
    Kutulu invoque régulièrement des wanderers pour ancrer la terreur au plus profond des sens de ceux qui osent fouler les dalles de sa crypte. Les portails sur lesquels il invoque ses minions sont le ou les portails les plus éloignés des joueurs.
    <br/>
    Tu as quelques tours avant que les minions ne commencent à apparaître...
    <br/>
    Quand un minion atteint ta case, il
    <i>
     épouvante
    </i>
    ton explorateur et disparait. L'explorateur perd
    <const>
     20
    </const>
    de santé mentale.
   </p>
   <p>
    Quand ta santé mentale descend en dessous d'un seuil
    <strong>
     un slasher apparaîtra a ta position.
    </strong>
    Ils ont un comportement légèrement différent, detaillé plus bas.
    <br/>
    Comme les wanderers, ils spawnent après un court délai et possédent un certain talent pour l'effroi, mais eux
    <strong>
     sont increvables.
    </strong>
    .
   </p>
   <b>
    Effets
   </b>
   <p>
    <action>
     PLAN
    </action>
    Tu peux établir un plan pour gagner de la santé mentale
    <const>
     2
    </const>
    fois dans une partie.
    <br/>
    C'est un effet qui dure
    <const>
     5
    </const>
    tours sur une distance de
    <const>
     2
    </const>
    ne traversant pas les murs.
    <br/>
    Il rend
    <const>
     3
    </const>
    points de santé à chaque joueur dans la portée d'effet. Additionnellement, le lanceur regagne
    <const>
     3
    </const>
    de santé supplémentaire pour chaque autre joueur à portée. L'effet bouge avec ton explorateur.
   </p>
   <p>
    <action>
     LIGHT
    </action>
    L'effet dissuade les minions de marcher vers ton explorateur.
    <br/>
    Light ajoute
    <const>
     4
    </const>
    à la distance de chaque case touchée par l'effet pour calculer la distance entre un minion et sa proie (le minion verra les explorateurs dans l'effet plus loin qu'ils ne sont réellement).
    <br/>
    L'effet reste actif
    <const>
     3
    </const>
    tours, pour une portée de
    <const>
     5
    </const>
    ne traversant pas non plus les murs, et peut être utilisé jusqu'à
    <const>
     3
    </const>
    fois par partie.
   </p>
   <p>
    Un joueur ne peux pas avoir deux effets actifs au même moment.
   </p>
   <p>
    <action>
     YELL
    </action>
    Tu peux crier "Derrière toi !" affectant les explorateurs dans un cercle de
    <const>
     1
    </const>
    case.
    <br/>
    Les explorateurs touchés seront aux aguets pendant
    <const>
     2
    </const>
    tours les rendant inaptes à faire quoi que ce soit (ils feront un WAIT).
    <br/>
    Mais souvenez vous que cela ne marche qu'une seule fois par joueur.
    <span style="display: none;">
     Vous savez, on peut tromper 1000 fois 1000 personnes, euh...non, on peut tromper 1 fois 1000 pers...euh je ne sais plus.
    </span>
   </p>
   <p>
    <const>
     SHELTER
    </const>
    Les abris sont à des positions fixes sur la carte. Quand un explorateur est sur l'abri, son aura apaisante récupérer
    <const>
     5
    </const>
    de santé à chaque tour. (ton explorateur souffrira toujours de la perte passive de santé).
    <br/>
    Les abris commencent avec
    <const>
     10
    </const>
    <i>
     d'énergie
    </i>
    . Un abri perd
    <const>
     1
    </const>
    d'énergie pour chaque tour et joueur sur l'abri. Une fois à court d'énergie, l'abri ne prodigue plus d'atmosphère de confiance avant d'être complètement rerempli.
    <br/>
    Les abris sont restaurés à hauteur de
    <const>
     10
    </const>
    d'énergie tous les
    <const>
     50
    </const>
    tours.
   </p>
   <p>
    <b>
     Actions
    </b>
    <br/>
    Chaque tour un explorateur doit choisir une action parmis la liste ci-dessous :
   </p>
   <ul style="padding-bottom: 0">
    <li>
     <action>
      WAIT
     </action>
     : ton explorateur ne bouge pas.
     <span style="display: none;">
      Poule mouillée.
     </span>
    </li>
    <li>
     <action>
      MOVE x y
     </action>
     : Ton explorateur va bouger d'une case dans la direction du plus court chemin vers la case ciblée. Si la cible est inaccessible, l'explorateur ne bouge pas.
    </li>
    <li>
     <action>
      LIGHT
     </action>
     : ton explorateur allumera une torche qu'il gardera en main pendant ses déplacements.
    </li>
    <li>
     <action>
      PLAN
     </action>
     : ton explorateur va surpasser sa terreur et établir un plan ; récupérant un peu de santé mentale pour tout ceux qui entendent le plan.
    </li>
    <li>
     <action>
      YELL
     </action>
     : ton explorateur va tenter de duper les explorateurs aux alentours, les forçant à s'arrêter pour la durée de deux tours.
    </li>
   </ul>
  </div>
 </div>
 <!--	Minions -->
 <div class="statement-section">
  <h2>
   <span class="icon icon-expertrules">
   </span>
   <span>
    Règles expert
   </span>
  </h2>
  <p>
   Tu peux accéder au Referee via un
   <a href="https://github.com/JohnnyGuye/code-of-kutulu">
    dépôt github
   </a>
   public
  </p>
  <div class="statement-content">
   <h2>
    Minions
   </h2>
   <b>
    Wanderers
   </b>
   <br/>
   Ils sont invoqués tous les
   <const>
    5
   </const>
   tours.
   <br/>
   Ils ont un comportement relativement simple :
   <ol>
    <li>
     Ils sont invoqués en
     <const>
      3
      <span>
       -6
      </span>
     </const>
     tours.
    </li>
    <li>
     Ils ciblent le plus proche explorateur.
    </li>
    <li>
     Ils bougent vers leur cible d'une case.
    </li>
    <li>
     Et ils recommencent de l'étape 2.
    </li>
   </ol>
   <p>
    Quand ils sont sur la même case qu'un explorateur, tous les explorateurs de cette case sont épouvantés, puis le minion disparait.
    <br/>
    Dans le cas d'une distance équivalente à l'étape 2, les wanderers gardent leur ancienne cible. Si ça ne peut pas être résolu de cette manière, la nouvelle cible est choisie aléatoirement.
    <br/>
    Il se peut que deux chemins de même distance mènent à leur cible. Dans ce cas, le wanderer se déplacera en priorité dans cet ordre : Haut, Droite, Bas, Gauche.
    <br/>
    Si le minion n'atteint aucune cible en
    <const>
     <span>
      30-40
     </span>
    </const>
    tours, Kutulu perd patience et le rappelle.
   </p>
   <div>
    <b>
     Slashers
    </b>
    <br/>
    Ils sont plus compliqués à comprendre mais restent des minions machine à état:
    <ol>
     <li>
      L'invocation dure
      <const>
       6
      </const>
      tours.
     </li>
     <li>
      WANDERING: Ils agissent exactement comme les Wanderers jusqu'à être en ligne de vue d'un explorateur (pas de mur entre le minion et le slasher et en ligne droite). Il passe alors en mode "STALKING"
     </li>
     <li>
      STALKING: Quand il stalke, le slasher charge sa rage pour
      <const>
       2
      </const>
      tours et continue de scanner les environs dans sa
      <a href="https://en.wikipedia.org/wiki/Line_of_sight_(gaming)">
       ligne de vue
      </a>
      , et met à jour la position de sa cible tant qu'elle reste en ligne de vue.
      <br/>
      Quand les
      <const>
       2
      </const>
      tours sont passés, le slasher rentre en phase de RUSH
     </li>
     <li>
      RUSHING: Le slasher fonce instantannément sur sa cible, ou sur la dernière position connue de sa cible. Tous les explorateurs sur la case d'arrivée sont épouvantés. Le slasher est alors étourdit (aka STUNNED)
     </li>
     <li>
      STUNNED: Quand il est étourdit le slasher est aussi effrayant qu'un lapin nain pendant
      <const>
       6
      </const>
      tours. Après quoi, il recommence à partir de l'étape 2 jusqu'à la fin des temps (voire un peu plus, faites attention aux coins sombre en rentrant chez vous)
     </li>
    </ol>
    <p>
     <strong>
      Quand un explorateur est en ligne de vue du slasher juste après l'invocation, le slasher grille les étapes WANDERING et STALKING pour foncer directement sur la cible.
     </strong>
    </p>
    <p>
     Les slashers sont créés par la terreur des explorateurs et sont ainsi créés un à un quand un explorateur descend en dessous des
     <const>
      200
     </const>
     de santé mentale pour la première fois. Cela signifie qu'il y aura au maximum 4 slashers sur le terrain.
     <br/>
     <i>
      A l'instar de la peur et l'admiration inspirée par Kutulu, ils ne peuvent mourir.
     </i>
     <br/>
     Les slashers gardent leur cible jusqu'à ce qu'elle disparaisse de leur vue. Si cela arrive ils choisissent une nouvelle cible en ligne de vue. S'il n'yen a pas, le slasher garde en mémoire la dernière position de sa cible.
     <br/>
     Si un explorateur entre en ligne de vue, il est choisi pour cible. Si deux arrivent en ligne de vue en même temps, la nouvelle cible est choisis ainsi : précédente cible, sinon cible la plus proche.
     <br/>
     Si c'est unsolvable pour le slasher, il est alors confus et passe à l'étape STUNNED
    </p>
    <p>
     Si tu préfères un graphe, voici un lien :
     <a href="https://github.com/JohnnyGuye/code-of-kutulu/blob/master/ressources/slasher_state_machine_fr.png">
      comportement du slasher
     </a>
    </p>
   </div>
   <br/>
   <br/>
   <h2>
    Fonctionnement d'un tour
   </h2>
   Un tour se déroule de la manière suivante :
   <ol>
    <li>
     Tous les joueurs reçoivent les mêmes informations sur le jeu et répondent une action.
    </li>
    <li>
     les YELLs sont résolus en premier : tout explorateur sujet à un
     <action>
      YELL
     </action>
     voit son action convertie en
     <action>
      WAIT
     </action>
     .
    </li>
    <li>
     Les nouveaux minions sont invoqués.
    </li>
    <li>
     Les joueurs se déplacent si besoin.
    </li>
    <li>
     Les effets sont appliqués (PLAN / LIGHT
     <span>
      / SHELTER
     </span>
     ).
    </li>
    <li>
     Les minions se déplacent.
    </li>
    <li>
     Les minions épouvantent les explorateurs s'ils le peuvent.
    </li>
    <li>
     Les explorateurs perdent de la santé mentale, et les wanderers perdent
     <const>
      1
     </const>
     en durée de vie
    </li>
   </ol>
  </div>
  <!-- Victory	-->
  <div class="statement-victory-conditions">
   <div class="icon victory">
   </div>
   <div class="blk">
    <div class="title">
     Victoire
    </div>
    <div class="text">
     Être le dernier explorateur à sombrer dans la folie.
    </div>
   </div>
  </div>
  <div class="statement-lose-conditions">
   <div class="icon lose">
   </div>
   <div class="blk">
    <div class="title">
     Défaite
    </div>
    <div class="text">
     <ul style="padding-bottom: 0">
      <li>
       Atteindre 0 de santé mentale avant les autres explorateurs.
      </li>
      <li>
       Ecrire une commande qui n'existe pas (si la commande est impossible mais correcte, elle sera remplacée par WAIT)
      </li>
     </ul>
    </div>
   </div>
  </div>
 </div>
 <div class="statement-section statement-protocol">
  <h1>
   <span class="icon icon-protocol">
   </span>
   <span>
    Entrées
   </span>
  </h1>
  <!-- Protocol block -->
  <div class="blk">
   <div class="title">
    Entrée d'initialisation
   </div>
   <div class="text">
    <span class="statement-lineno">
     Ligne 1
    </span>
    :
    <var>
     width
    </var>
    pour la largeur de la carte
    <br>
     <span class="statement-lineno">
      Ligne 2
     </span>
     :
     <var>
      height
     </var>
     pour la hauteur de la carte
     <br>
      <span class="statement-lineno">
       <var>
        height
       </var>
       lignes suivantes
      </span>
      : une chaine de caractères représentant chaque ligne de la carte en commençant par le haut. Chaque caractère représente une case de la carte tel que :
      <br>
       <ul style="padding-bottom: 0; padding-top: 0">
        <li>
         <const>
          #
         </const>
         : mur
         <br/>
        </li>
        <li>
         <const>
          w
         </const>
         : portail d'invocation
         <br/>
        </li>
        <li>
         <const>
          U
         </const>
         : abri
         <br/>
        </li>
        <li>
         <const>
          .
         </const>
         : case vide
         <br/>
        </li>
       </ul>
       <span>
        <span class="statement-lineno">
         Une ligne :
        </span>
        4 entiers contenant des modifications de caractéristiques
       </span>
       <br/>
       <ul style="padding-bottom: 0; padding-top: 0">
        <li>
         <var>
          sanityLossLonely
         </var>
         : la santé perdue quand l'explorateur est esseulé (
         <const>
          3-6
         </const>
         )
        </li>
        <li>
         <var>
          sanityLossGroup
         </var>
         : la santé perdue quand l'explorateur est en groupe (
         <const>
          1-3
         </const>
         )
        </li>
        <li>
         <var>
          wandererSpawnTime
         </var>
         : le temps que mettent les minions à arriver en jeu après invocation (
         <const>
          3-6
         </const>
         )
        </li>
        <li>
         <var>
          wandererLifeTime
         </var>
         : le temps dont disposent les minions avant d'être rappellés par Kutulu (
         <const>
          30-40
         </const>
         )
        </li>
       </ul>
      </br>
     </br>
    </br>
   </div>
  </div>
  <!-- Protocol block -->
  <div class="blk">
   <div class="title">
    Entrée pour un tour de jeu
   </div>
   <div class="text">
    <span class="statement-lineno">
     Première ligne :
    </span>
    un entier
    <var>
     entityCount
    </var>
    pour le nombre d'entités présentes en jeu,
    <span>
     (explorateurs, minions et effets).
    </span>
    <br>
     <span class="statement-lineno">
      <var>
       entityCount
      </var>
      lignes suivantes :
     </span>
     chacune des entitées réprésentées telles que :
     <br>
      <ul style="padding-bottom: 0; padding-top: 0">
       <li>
        chaîne de charactères
        <var>
         entityType
        </var>
        le type de l'entité parmi :
        <const>
         EXPLORER
        </const>
        |
        <const>
         WANDERER
        </const>
        <span>
         |
         <const>
          EFFECT_PLAN
         </const>
         |
         <const>
          EFFECT_LIGHT
         </const>
        </span>
        <span>
         |
         <const>
          SLASHER
         </const>
         |
         <const>
          EFFECT_SHELTER
         </const>
         |
         <const>
          EFFECT_YELL
         </const>
        </span>
       </li>
       <li>
        Entier
        <var>
         id
        </var>
        l'identifiant unique d'une entité,
        <const>
         -1
        </const>
        si c'est un effet
        <br/>
       </li>
       <li>
        Deux Entiers
        <var>
         x
        </var>
        &amp;
        <var>
         y
        </var>
        la position de l'entité.
        <span>
         Pour un effet, son origine.
        </span>
       </li>
       <li>
        Integer
        <var>
         param0
        </var>
        <ul class="ul2" style="padding-bottom: 0; padding-top: 0">
         <li>
          Explorateur : santé mentale
         </li>
         <li>
          Minion en cours d'invocation : temps avant d'être invoqué
         </li>
         <li>
          Wanderer : temps avant d'être rappelé
         </li>
         <li>
          Slasher : temps avant de changer d'état
         </li>
         <li>
          Abri : énergie restante
         </li>
         <li>
          Effet : temps avant de disparaitre
         </li>
        </ul>
       </li>
       <li>
        Entier
        <var>
         param1
        </var>
        :
        <ul class="ul2" style="padding-bottom: 0; padding-top: 0">
         <li>
          Explorateur : la quantité de plans possible à élaborer
         </li>
         <li>
          Minion : l'état actuel du minion -&gt;
          <const>
           SPAWNING = 0
          </const>
          ,
          <const>
           WANDERING = 1
          </const>
          <span>
           ,
           <const>
            STALKING = 2
           </const>
           ,
           <const>
            RUSHING = 3
           </const>
           ,
           <const>
            STUNNED = 4
           </const>
          </span>
         </li>
         <li>
          Abri :
          <const>
           -1
          </const>
          .
         </li>
         <li>
          Effet : L'
          <var>
           id
          </var>
          de l'explorateur ayant lancé l'effet
         </li>
        </ul>
       </li>
       <li>
        Entier
        <var>
         param2
        </var>
        :
        <ul class="ul2" style="padding-bottom: 0; padding-top: 0">
         <li>
          Explorateur : la quantité de torches encore en stock
         </li>
         <li>
          Minion :
          <var>
           id
          </var>
          de l'explorateur ciblé par ce minion.
          <const>
           -1
          </const>
          s'il n'a pas de cible (ça n'arrive qu'au premier tour de spawn des wanderers)
         </li>
         <li>
          Abri :
          <const>
           -1
          </const>
          .
         </li>
         <li>
          Effet :  l'
          <var>
           id
          </var>
          de l'explorateur touché pour un
          <const>
           EFFECT_YELL
          </const>
          ,
          <const>
           -1
          </const>
          pour les autres effets.
         </li>
        </ul>
       </li>
      </ul>
      <p>
       Note: l'explorateur que tu contrôles est
       <b>
        la première
       </b>
       entité donnée. L'
       <var>
        id
       </var>
       n'est pas nécessairement 0.
      </p>
     </br>
    </br>
   </div>
  </div>
  <!-- Protocol block -->
  <div class="blk">
   <div class="title">
    Sortie pour un tour de jeu
   </div>
   <div class="text">
    <span class="statement-lineno">
     Une ligne
    </span>
    : l'action de ton explorateur parmis :
    <ul style="padding-bottom: 0; padding-top: 0">
     <li>
      <action>
       WAIT
      </action>
     </li>
     <li>
      <action>
       MOVE x y
      </action>
     </li>
     <li>
      <action>
       PLAN
      </action>
     </li>
     <li>
      <action>
       LIGHT
      </action>
     </li>
     <li>
      <action>
       YELL
      </action>
     </li>
    </ul>
    <p>
     Tu peux aussi afficher un message en ajoutant quelques caractères après ton action :
     <action>
      WAIT Au niveau... du chou rouge
     </action>
    </p>
   </div>
  </div>
  <!-- Protocol block -->
  <div class="blk">
   <div class="title">
    Contraintes
   </div>
   <div class="text">
    <const>
     10
    </const>
    ≤
    <var>
     width
    </var>
    ≤
    <const>
     24
    </const>
    <br>
     <const>
      10
     </const>
     ≤
     <var>
      height
     </var>
     ≤
     <const>
      20
     </const>
     <br>
      <const>
       0
      </const>
      ≤
      <var>
       spawns
      </var>
      ≤
      <const>
       8
      </const>
      <br>
       <span>
        <const>
         0
        </const>
        ≤
        <var>
         shelters
        </var>
        ≤
        <const>
         8
        </const>
       </span>
       <br>
        Temps de réponse du premier tour ≤ 1000ms
        <br>
         Temps de réponse par tour ≤ 50ms
        </br>
       </br>
      </br>
     </br>
    </br>
   </div>
  </div>
 </div>
</div>